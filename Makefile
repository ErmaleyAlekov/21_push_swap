NAME = push_swap

CC = gcc

HEADERS_PATH = ./includes/

INCLUDES = -I$(HEADERS_PATH) 

CFLAGS = -Wall -Wextra -Werror
RM = rm -rf

DIR = $(shell pwd)

DIRSRC = sources
WAIT = 2

GREEN ='\033[0;32m'
RED ='\033[0;31m'

UNAME = $(shell uname)


SRC = $(addprefix $(DIRSRC)/, \
			check_arg.c commands.c commands2.c main.c \
		  sort.c sort2.c sub_fun.c)
OBJDIR = obj

OBJ = $(SRC:$(DIRSRC)/%.c= $(OBJDIR)/%.o)

OBJ_PATHS = $(OBJDIR) $(shell ls -R $(DIRSRC) | grep / | sed 's/://g' | sed 's/src/$(OBJDIR)/g')

HEADERS = $(addprefix $(HEADERS_PATH), \
 ps.h)

all: $(NAME) $(HEADERS) $(WAIT)
	@echo "$(GREEN)______________________________________________________"
	@echo "$(GREEN)~####~~##~~##~~####~~~####~~#####~~~####~~~####~~~~###"
	@echo "$(GREEN)##~~~~~##~~##~##~~##~##~~##~##~~~~~##~~~~~##~~~~~~~###"
	@echo "$(GREEN)~####~~##~~##~##~~~~~##~~~~~####~~~~####~~~####~~~~###"
	@echo "$(GREEN)~~~~##~##~~##~##~~##~##~~##~##~~~~~~~~~##~~~~~##"
	@echo "$(GREEN)~####~~~####~~~####~~~####~~#####~~~####~~~####~~~~###"
	@echo "$(GREEN)______________________________________________________"
$(NAME): $(OBJ)
	
	@$(CC) $(CFLAGS) $(INCLUDES) $(OBJ) -o $(NAME)

$(OBJDIR)/%.o: $(DIRSRC)/%.c $(WAIT) $(HEADERS) 
	@mkdir -p $(OBJ_PATHS)
	@./pro_bar
	@$(CC) $(CFLAGS) $(INCLUDES) -c -o $@ $< 
$(WAIT):
	@echo "$(GREEN)____________________________________________________________________"
	@echo "$(GREEN)~####~~~####~~##~~~#~#####~~######~##~~~~~######~##~~##~~####~~~~###"
	@echo "$(GREEN)##~~##~##~~##~###~##~##~~##~~~##~~~##~~~~~~~##~~~###~##~##~~~~~~~###"
	@echo "$(GREEN)##~~~~~##~~##~##~#~#~#####~~~~##~~~##~~~~~~~##~~~##~###~##~###~~~###"
	@echo "$(GREEN)##~~##~##~~##~##~~~#~##~~~~~~~##~~~##~~~~~~~##~~~##~~##~##~~##"
	@echo "$(GREEN)~####~~~####~~##~~~#~##~~~~~######~######~######~##~~##~~####~~~~###"
	@echo "$(GREEN)____________________________________________________________________"
clean:
	@echo "$(RED)_______________________________________________________________________"
	@echo "$(RED)#####~~#####~~##~~~~~#####~~######~#####  ~####~~#####~~######~~~~~~###"
	@echo "$(RED)##~~##~##~~~~~##~~~~~##~~~~~~~##~~~##     ##~~##~##~~##~~~~~##~~~~~~###"
	@echo "$(RED)##~~##~####~~~##~~~~~####~~~~~##~~~####   ##~~##~#####~~~~~~##~~~~~~###"
	@echo "$(RED)##~~##~##~~~~~##~~~~~##~~~~~~~##~~~##     ##~~##~##~~##~##~~##"
	@echo "$(RED)#####~~#####~~######~#####~~~~##~~~#####  ~####~~#####~~~####~~~~~~~###"
	@echo "$(RED)_______________________________________________________________________"
	@$(RM) $(OBJ)

fclean:
	@echo "$(RED)____________________________________________________________________"
	@echo "$(RED)#####~~#####~~##~~~~~#####~~######~#####  ~####~~##~~~~~##~~~~~~~###"
	@echo "$(RED)##~~##~##~~~~~##~~~~~##~~~~~~~##~~~##     ##~~##~##~~~~~##~~~~~~~###"
	@echo "$(RED)##~~##~####~~~##~~~~~####~~~~~##~~~####   ######~##~~~~~##~~~~~~~###"
	@echo "$(RED)##~~##~##~~~~~##~~~~~##~~~~~~~##~~~##     ##~~##~##~~~~~##"
	@echo "$(RED)#####~~#####~~######~#####~~~~##~~~#####  ##~~##~######~######~~~###"
	@echo "$(RED)____________________________________________________________________"
	@$(RM) $(NAME) $(OBJ)

re: fclean all	

.PHONY: all re clean fclean